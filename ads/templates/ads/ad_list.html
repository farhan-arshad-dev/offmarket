{% extends "base.html" %}
{% block title %}Buy and Sell | {{ block.super }}{% endblock %}
{% block heading_text %}Buy and Sell{% endblock %}
{% load static %}
{% block content %}
  <div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3 class="mb-0">Ads</h3>
      <a href="{% url 'ads:ad_create' %}" class="btn btn-primary btn-sm">+ Post Ad</a>
    </div>
    {% if ads %}
      <div class="row g-4">
        {% for ad in ads %}
          <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm position-relative">
              <!-- Invisible clickable link -->
              <a href="{% url 'ads:ad_detail' ad.pk %}"
                 class="stretched-link"
                 aria-label="View {{ ad.title }}"></a>
              <!-- Image Preview -->
              {% if ad.images.exists %}
                <img src="{{ ad.images.first.image.url }}"
                     class="card-img-top rounded"
                     alt="{{ ad.title }}"
                     width="400"
                     height="220"
                     style="object-fit: cover">
              {% else %}
                <img src="{% static 'palceholders/ad-placeholder.png' %}"
                     class="card-img-top"
                     alt="No image"
                     width="400"
                     height="220">
              {% endif %}
              <div class="card-body d-flex flex-column">
                <h5 class="card-title text-truncate">{{ ad.title }}</h5>
                <p class="card-text text-muted small mb-2">{{ ad.description|truncatewords:18 }}</p>
                <div class="mt-auto">
                  <span class="fw-bold text-success">{{ ad.price }} PKR</span>
                </div>
              </div>
              <div class="card-footer bg-white border-0 d-flex justify-content-between">
                <small class="text-muted">{{ ad.created_at|date:"d M Y" }}</small>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info">No ads available.</div>
    {% endif %}
  </div>
{% endblock %}
